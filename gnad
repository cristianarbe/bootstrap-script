#!/bin/bash
get(){
  mkdir -pv "$PROFILE_PATH"
  git clone --depth 1 "https://github.com/${1}" "$PROFILE_PATH"
}

enable(){
  chmod +x "$PROFILE_PATH/install"
  bash "$PROFILE_PATH/install"
}

list(){
  ls -1 "$HOME/.config/gnad/profiles/"
}

remove(){
  rm -rf "$PROFILE_PATH"
}

update(){
  read -rp "This will override any change you have made to the profile, do you want to continue? (y/N): " answer
  [[ $answer != "y" ]] && exit
  for profile in "$CONFIG_PATH"/*; do
    cd "$CONFIG_PATH/$profile"
    git pull
  done
}

main(){
  readonly PROFILE_NAME="${2/\//-}"
  readonly CONFIG_PATH="$HOME/.config/gnad/profiles"
  readonly PROFILE_PATH="$CONFIG_PATH/$PROFILE_NAME"
  "$@"
}

main "$@"
